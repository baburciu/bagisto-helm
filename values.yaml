## Bagisto Application configuration

# -- Number of Bagisto pod replicas
replicaCount: 2

# -- Container image settings
image:
  # -- Bagisto container image repository
  repository: docker.io/bogdanadrianburciu/bagisto
  # -- Bagisto container image tag
  tag: latest
  # -- Image pull policy
  pullPolicy: IfNotPresent

# -- Kubernetes service configuration
service:
  # -- Service type
  type: ClusterIP
  # -- Service port
  port: 80

# -- Application Storage (for uploads, cache, etc.)
storage:
  # -- Enable persistent storage for Bagisto uploads and cache
  enabled: true
  # -- Storage access mode (ReadWriteMany required for multiple replicas)
  accessMode: ReadWriteMany
  # -- Storage size
  size: 10Gi
  # -- Storage class name (leave empty for default)
  storageClass: ""

# -- Bagisto application configuration
app:
  # -- Application name
  name: "Bagisto"
  # -- Application environment (local, production)
  env: "production"
  # -- Enable debug mode
  debug: true
  # -- Laravel APP_KEY (base64-encoded 32-byte random string). Generate with: echo "base64:$(openssl rand -base64 32)"
  key: "base64:CHANGE_THIS_KEY_RUN_php_artisan_key_generate"
  # -- Application URL
  url: "http://localhost"
  # -- Application timezone
  timezone: "UTC"
  # -- Application locale
  locale: "en"
  # -- Application currency code
  currency: "EUR"
  # -- Use existing Kubernetes secret for APP_KEY (recommended for production)
  existingSecret:
    # -- Name of the secret containing APP_KEY
    name: ""
    # -- Key in the secret containing the APP_KEY value
    keyKey: "app-key"

# -- Session Configuration
session:
  # -- Session driver (file, redis, database)
  driver: "redis"
  # -- Session lifetime in minutes
  lifetime: 120

# -- Cache Configuration
cache:
  # -- Cache store (file, redis, database)
  store: "redis"
  # -- Cache key prefix
  prefix: "bagisto_cache"

# -- Queue Configuration
queue:
  # -- Queue connection driver (sync, redis, database)
  connection: "redis"

# -- Mail Configuration
mail:
  # -- Enable mail sending
  enabled: false
  # -- Mail driver (smtp, sendmail, mailgun, ses)
  mailer: "smtp"
  # -- SMTP host
  host: "mailpit"
  # -- SMTP port
  port: 1025
  # -- From email address configuration
  from:
    # -- From email address
    address: "shop@example.com"
    # -- From email name
    name: "Bagisto Shop"
  # -- Admin email configuration
  admin:
    # -- Admin email address
    address: "admin@example.com"
    # -- Admin email name
    name: "Bagisto Admin"

# -- MySQL Database Configuration
databaseConfig:
  # -- External MySQL configuration (for managed services like AWS RDS)
  external:
    # -- Enable external MySQL
    enabled: false
    # -- External MySQL host
    host: "prod-mysql.example.com"
    # -- External MySQL port
    port: 3306
    # -- External MySQL username
    username: "bagisto"
    # -- External MySQL password (use existingSecret instead for production)
    password: "prodpassword"
    # -- External MySQL database name
    name: "bagisto"

  # -- Database host (supports template syntax)
  host: "{{ include \"bagisto.fullname\" . }}-mysql"
  # -- Database port
  port: 3306
  # -- Database name
  name: bagisto
  # -- Database username
  username: bagisto
  # -- Database password (use existingSecret instead for production)
  password: bagisto
  # -- MySQL root password (for standalone MySQL deployment)
  rootPassword: root
  # -- Use existing Kubernetes secret for database password (recommended for production)
  # existingSecret:
  #   # -- Name of the secret containing database password
  #   name: ""
  #   # -- Key in the secret containing the password value
  #   passwordKey: "db-password"
  #   # -- Key in the secret containing the root password value
  #   rootPasswordKey: "mysql-root-password"

# -- Standalone MySQL Configuration (official MySQL image with ARM64 support). Only deployed when mysql.enabled is false and databaseConfig.external.enabled is false.
mysqlStandalone:
  # -- MySQL container image settings
  image:
    # -- MySQL image repository (official MySQL image)
    repository: docker.io/mysql
    # -- MySQL image tag
    tag: "9.6.0-oraclelinux9"
  # -- MySQL command line arguments (e.g., for charset configuration)
  args:
    - --character-set-server=utf8mb4
    - --collation-server=utf8mb4_unicode_ci
  # -- MySQL persistence configuration
  persistence:
    # -- MySQL persistent volume size
    size: 10Gi
    # -- MySQL storage class name
    storageClass: ""
  # -- MySQL resource requests and limits
  resources:
    requests:
      memory: "512Mi"
      cpu: "500m"
    limits:
      memory: "1Gi"
      cpu: "1000m"

# -- MySQL Subchart Configuration (Bitnami MySQL). Set enabled to false when using external database.
mysql:
  # -- Enable MySQL subchart deployment
  enabled: false  # can't be used in OCI OKE due to lack of ARM64 support in public.ecr.aws
  # -- MySQL authentication configuration
  global:
    imageRegistry: public.ecr.aws
    security:
      allowInsecureImages: true
  auth:
    # -- MySQL database name
    database: bagisto
    # -- MySQL user name
    username: bagisto
    # -- MySQL user password
    password: bagisto
    # -- MySQL root password
    rootPassword: root
    # -- Use existing secret for MySQL passwords (recommended for production). If set, auth.password and auth.rootPassword are ignored
    existingSecret: ""
  # -- MySQL primary configuration
  primary:
    # -- MySQL persistence configuration
    persistence:
      # -- Enable persistence for MySQL
      enabled: true
      # -- MySQL persistent volume size
      size: 10Gi
      # -- MySQL storage class name
      storageClass: ""
  # -- MySQL architecture (standalone or replication)
  architecture: standalone

# -- Redis Connection Configuration
redisConfig:
  # -- External Redis configuration (for managed services like AWS ElastiCache)
  external:
    # -- Enable external Redis
    enabled: false
    # -- External Redis host
    host: "prod-redis.example.com"
    # -- External Redis port
    port: 6379

  # -- Redis host (supports template syntax)
  host: "{{ .Release.Name }}-redis-master"
  # -- Redis port
  port: 6379

  # -- Use existing Kubernetes secret for Redis password (recommended for production)
  existingSecret:
    # -- Name of the secret containing Redis password
    name: ""
    # -- Key in the secret containing the password value
    passwordKey: "redis-password"

# -- Redis Subchart Configuration (Bitnami Redis). Set enabled to false when using external Redis.
redis:
  # -- Enable Redis subchart deployment
  enabled: true
  # -- Redis architecture (standalone or replication)
  architecture: standalone
  # -- Redis authentication configuration
  auth:
    # -- Enable Redis password authentication
    enabled: false
  # -- Redis master configuration
  master:
    # -- Redis persistence configuration
    persistence:
      # -- Enable persistence for Redis
      enabled: true
      # -- Redis persistent volume size
      size: 2Gi
      # -- Redis storage class name
      storageClass: ""
  # -- Redis common configuration
  commonConfiguration: |-
    # Enable AOF persistence
    appendonly yes
    # Save snapshot every 20 seconds if at least 1 key changed
    save 20 1
    # Set log level to warning
    loglevel warning

# -- Elasticsearch Configuration (for advanced search functionality)
elasticsearch:
  # -- Enable Elasticsearch deployment
  enabled: false
  # -- Number of Elasticsearch replicas
  replicas: 1
  # -- Elasticsearch container image
  image: docker.elastic.co/elasticsearch/elasticsearch
  # -- Elasticsearch image tag
  imageTag: 9.2.4
  # -- Elasticsearch Java options (heap size)
  esJavaOpts: "-Xms256m -Xmx256m"
  # -- Elasticsearch resource requests and limits
  resources:
    requests:
      memory: "512Mi"
      cpu: "100m"
    limits:
      memory: "1Gi"
      cpu: "1000m"
  # -- Elasticsearch persistent volume configuration
  volumeClaimTemplate:
    accessModes: ["ReadWriteOnce"]
    resources:
      requests:
        storage: 10Gi
  # -- Elasticsearch configuration file
  esConfig:
    elasticsearch.yml: |
      xpack.security.enabled: false
      discovery.type: single-node
